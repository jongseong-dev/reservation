# 기능 요구사항

- 주어진 사용자 시나리오에서 기능 요구사항을 추출하여 API를 설계한다.

# 예약 조회, 신청

## 시나리오

- ~~고객은 예약 신청이 가능한 시간과 인원을 알 수 있습니다.~~
- ~~예약은 시험 시작 3일 전까지 신청 가능하며, 동 시간대에 최대 5만명까지 예약할 수 있습니다. 이때, **확정되지 않은 예약**은 5만명의 제한에 포함되지 않습니다.~~
- ~~예약에는 시험 일정과 응시 인원이 포함되어야 합니다.~~
- ~~예를 들어, 4월 15일 14시부터 16시까지 이미 3만 명의 예약이 확정되어 있을 경우, 예상 응시 인원이 2만명 이하인 추가 예약 신청이 가능합니다.~~
- ~~고객은 본인이 등록한 예약만 조회할 수 있습니다.~~
- ~~어드민은 고객이 등록한 모든 예약을 조회할 수 있습니다.~~

## 기능 추출

### 예약 가능 목록 조회(GET)
- 요청
    - query param
        - 시간을 포함한 일자 범위로 필터링
        - 예약 가능한 일자 조회
        - 기간 필터링도 추가해야 할 듯 일, 주, 월, 년 단위로 보일 수 있도록 
- 응답:
    - 200 OK
        - `SUCCESS` 
          - 예약 신청이 가능한 시간
          - 현재 예약한 인원
    - 404 Not Found 
### 예약 신청 조회(GET)
- 요청
    - query param
        - 시간을 포함한 일자 범위로 필터링
- 응답:
    - 200 OK
        - `SUCCESS`
            - 본인이 예약한 일자  
    - 404 Not Found
        - 예약한 일자가 없는 경우
- 제약조건
    - 본인의 예약만 조회 가능함 

### 관리자 예약 신청 조회(GET)
- 요청
  - query param:
      - 일자로 필터링
- 응답
    - 고객이 등록한 모든 예약 일자 조회

### 예약 신청(POST)
- 요청
    - request body
      - 시험 시작 일정(시간 포함)
      - 시험 종료 일정(시간 포함)
      - 응시 인원
- 응답
    - 201 Created
        - `SUCCESS` 
            - 예약 신청 결과
        - `MAXIMUN EXCEEDED`
            - 인원이 가득차서 실패함 
    - 400 Bad Request
        - 유효하지 않은 값 
- 제약사항
    - 시험 시작 3일 전까지 신청 가능
    - 동 시간대에 최대 5만명까지 예약 가능
    - 확정되지 않은 예약은 5만명의 제한에 포함되지 않음


# 예약 수정 및 확정

## 시나리오

- ~~예약 확정: 고객의 예약 신청 후, 어드민이 이를 확인하고 확정을 통해 예약이 최종적으로 시험 운영 일정에 반영됩니다.~~
- ~~확정되지 않은 예약은 최대 인원 수 계산에 포함되지 않습니다.~~
- ~~고객은 예약 확정 전에 본인 예약을 수정할 수 있습니다.~~
- ~~어드민은 모든 고객의 예약을 확정할 수 있습니다.~~
- ~~어드민은 고객 예약을 수정할 수 있습니다.~~

## 기능 추출

### 관리자 예약 확정(POST)
- 요청
    - path param
        - id  
- 응답
    - 200 OK
        - `SUCCESS`
    - 400 Bad Request
    - 404 Not Found
 - 제약사항

### 예약 수정(POST)
- 요청 
    - path param
        - id 
    - request body
        - 시험 시작 일정(시간 포함)
        - 시험 종료 일정(시간 포함)
        - 응시 인원
- 응답
    - 200 OK
        - `SUCCESS`
            - 예약 수정 결과
        - `MAXIMUN EXCEEDED`
            - 인원이 가득차서 실패함 
    - 400 Bad Request
        - 유효하지 않은 값  
    - 401 Unauthorized
        - 이미 확정이 돼서 수정 권한이 없음
- 제약사항
    - 본인 예약만 수정 가능 
    - 예약 확정 전에만 수정 가능

### 관리자 예약 수정(POST)
- 요청 
    - path param
        - id 
    - request body
        - 시험 시작 일정(시간 포함)
        - 시험 종료 일정(시간 포함)
        - 응시 인원
- 응답
    - 200 OK
    - 400 Bad Request
        - 유효하지 않은 값
- 제약사항
    - 예약 확정 전에만 수정 가능

# 예약 삭제

## 시나리오

- 고객은 확정 전에 본인 예약을 삭제할 수 있습니다.
- 어드민은 모든 고객의 예약을 삭제할 수 있습니다.

## 기능 추출

### 예약 삭제(DELETE)
- 요청
    - path param
        - id 
- 응답
    - 204 No Content
- 제약사항
    - 예약 확정 전에만 삭제 가능
    - 본인 예약만 삭제 가능

### 관리자 예약 삭제(DELETE)
- 요청
    - path param
        - id
- 응답
    - 204 No Content
- 제약사항
    
# 질문
1. `고객은 예약 신청이 가능한 시간과 인원을 알 수 있습니다.` -> 알 수 있다는 뜻이 API 조회를 통해 알 수 있다는 것인지, 아니면 API 요청 없이 알고 있다는 뜻인지 궁금함. 왜냐하면 밑에 시나리오에서 본인이 등록한 예약만 조회할 수 있다는 항목이 있어서
2. 예약 신청 시간은 제한이 없는지 예를 들어 당일 09:00 ~ 18:00까지만 본다는지 하는 제한이 있는지 궁금함 
3. 관리자의 경우 django admin 페이지를 통해 조회와 예약 확정을 하는 기능을 사용해도 되는 것인지
4. 관리자가 예약 수정을 하는 경우에도 똑같이 확정 전에만 수정이 가능하고 학정 후에는 수정이 불가한게 맞는지
-----
추가(20240723)
1. 관리자가 확정할 때 인원수가 같은 고객이 인원수를 5만명 넘게 예약 했으면 부분적으로 인원을 확정할 수 있는지, 아니면 고객 본인이 예약인원을 수정해야 하는지